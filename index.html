<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WA Arboreal Marsupials & Map</title>
<link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet" />
<style>
/* -------------------- Base & Layout -------------------- */
html, body { 
    margin: 0; padding: 0; height: 100%; 
    font-family: 'Segoe UI', Arial, sans-serif; 
    background: #f7f7f7; color: #333; 
}

/* Fixed Tabs */
.main-tabs {
    display: flex; justify-content: center; align-items: center;
    background: #fff; border-bottom: 2px solid #ccc;
    height: 50px;
    position: fixed; top: 0; left: 0; right: 0; z-index: 3;
}
.main-tabs button {
    padding: 14px 22px; cursor: pointer; font-weight: bold;
    border: none; background: none; transition: 0.3s;
}
.main-tabs button.active {
    border-bottom: 4px solid #333;
}

/* Sections */
.section { display: none; } 
.section.active { display: block; }

/* Info Section Content Layout */
#info-section { 
    padding-top: 60px; /* Space for fixed tabs */
}
.tabs { 
    display: flex; justify-content: center; flex-wrap: wrap; 
    border-bottom: 2px solid #ccc; margin-bottom: 20px; 
}
.tab { padding: 12px 18px; cursor: pointer; font-weight: bold; }
.tab.active { border-bottom: 4px solid currentColor; }
.content { 
    display: none; max-width: 800px; margin: 0 auto; 
    background: #fff; padding: 20px; border-radius: 12px; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
}
.content.active { display: block; }
.species-name { font-size: 1.6em; font-weight: bold; text-align: center; margin-bottom: 6px; }
.sci-name { font-style: italic; font-size: 1.2em; text-align: center; }
.status { font-weight: bold; text-align: center; margin-top: 10px; }
.description { margin-top: 15px; line-height: 1.6; text-align: justify; }
.main-photo { text-align: center; margin: 20px 0; }
.main-photo img { width: 60%; max-width: 300px; height: auto; }
.images-row { display: flex; justify-content: space-around; align-items: center; margin: 20px 0; }
.images-row img { width: 45%; max-width: 150px; height: auto; }


/* -------------------- Map Layout -------------------- */
#map-section { 
    position: absolute; top: 50px; left: 0; right: 0; bottom: 0; 
} 
#map { 
    width: 100%; height: 100%; 
}

/* Hamburger Menu Toggle */
#menu-toggle {
    position: absolute; top: 10px; left: 10px; z-index: 10;
    background: #fff; border: none; font-size: 24px; 
    padding: 6px 10px; border-radius: 6px; cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

/* Menu Overlay */
#menu {
    position: absolute; 
    top: 70px; 
    left: 10px; z-index: 2;
    background: rgba(255,255,255,0.85); padding: 10px;
    font-family: sans-serif;
    /* FIX: max-height must be 100% minus the top offset (70px) and the desired bottom margin (10px) */
    max-height: calc(100% - 80px); 
    overflow-y: auto; border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    transition: transform 0.3s ease, opacity 0.3s ease;
}
#menu.hidden {
    transform: translateX(-120%);
    opacity: 0;
}

/* -------------------- Responsive Adjustments -------------------- */
@media (min-width: 601px){
    /* Hamburger is always visible, but the menu is positioned near the top of the map section */
    #menu { 
        transform: translateX(0); 
        top: 70px; 
    } 
    #menu.hidden { transform: translateX(-120%); opacity: 0; } 
}
@media (max-width: 600px){
    .main-photo img { width: 80%; max-width: 200px; }
    .images-row img { width: 45%; max-width: 120px; }
    .tabs { flex-direction: column; align-items: stretch; }
    .tab { text-align: center; border-bottom: 1px solid #ccc; }
    .tab.active { border-bottom: 4px solid currentColor; }
}
</style>
</head>
<body>

<div class="main-tabs">
  <button class="active" onclick="showSection('info', event)">Species Info</button>
  <button onclick="showSection('map', event)">Interactive Map</button>
</div>

<div id="info-section" class="section active">
  <div class="tabs">
    <div class="tab" style="color:#E56E5E;" onclick="showTab(0)">Red-tailed Phascogale</div>
    <div class="tab" style="color:#2E748A;" onclick="showTab(1)">Brush-tailed Phascogale</div>
    <div class="tab" style="color:#424258;" onclick="showTab(2)">Yellow-footed Antechinus</div>
    <div class="tab" style="color:#EE9A12;" onclick="showTab(3)">Western Pygmy Possum</div>
  </div>

  <div id="content0" class="content active">
    <div class="species-name" style="color:#E56E5E;">Red-tailed Phascogale</div>
    <div class="sci-name" style="color:#E56E5E;">Phascogale calura</div>
    <div class="status">Conservation Status: Conservation Dependent (WA)</div>
    <div class="main-photo"><img src="RTP.png" alt="Red-tailed Phascogale"></div>
    <div class="images-row">
      <img src="RTP_SIZE.png" alt="Red-tailed Phascogale size comparison">
      <img src="RTP_MAP.png" alt="Red-tailed Phascogale distribution map">
    </div>
    <div class="description">
      The red-tailed phascogale (Kenngoor in Noongar language) is a small, arboreal marsupial endemic to the semi-arid woodlands of Western Australia.
      Agile in tree canopies, it is now mostly found in predator-controlled reserves and suitable woodland habitats.
    </div>
  </div>

  <div id="content1" class="content">
    <div class="species-name" style="color:#2E748A;">Brush-tailed Phascogale</div>
    <div class="sci-name" style="color:#2E748A;">Phascogale tapoatafa wambenger</div>
    <div class="status">Conservation Status: Conservation Dependent (WA)</div>
    <div class="main-photo"><img src="BTP.png" alt="Brush-tailed Phascogale"></div>
    <div class="images-row">
      <img src="BTP_SIZE.png" alt="Brush-tailed Phascogale size comparison">
      <img src="BTP_MAP.png" alt="Brush-tailed Phascogale distribution map">
    </div>
    <div class="description">
      The brush-tailed phascogale (Ballawara in Noongar language; subspecies wambenger) inhabits forests and woodlands of southwestern Australia.
      Recognised by its black brush-like tail, it feeds on insects and small vertebrates and nests in tree hollows.
    </div>
  </div>

  <div id="content2" class="content">
    <div class="species-name" style="color:#424258;">Yellow-footed Antechinus</div>
    <div class="sci-name" style="color:#424258;">Antechinus flavipes leucogaster</div>
    <div class="status">Conservation Status: Least Concern</div>
    <div class="main-photo"><img src="ANT.png" alt="Yellow-footed Antechinus"></div>
    <div class="images-row">
      <img src="ANT_SIZE.png" alt="Yellow-footed Antechinus size comparison">
      <img src="ANT_MAP.png" alt="Yellow-footed Antechinus distribution map">
    </div>
    <div class="description">
      The yellow-footed antechinus (Mardo in Noongar language; subspecies leucogaster) inhabits forests and woodlands of southwestern Australia. 
      Energetic and mouse-sized, it is primarily insectivorous with a short breeding season.
    </div>
  </div>

  <div id="content3" class="content">
    <div class="species-name" style="color:#EE9A12;">Western Pygmy Possum</div>
    <div class="sci-name" style="color:#EE9A12;">Cercartetus concinnus</div>
    <div class="status">Conservation Status: Least Concern</div>
    <div class="main-photo"><img src="PYG.png" alt="Western Pygmy Possum"></div>
    <div class="images-row">
      <img src="PYG_SIZE.png" alt="Western Pygmy Possum size comparison">
      <img src="PYG_MAP.png" alt="Western Pygmy Pos
